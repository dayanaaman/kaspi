<canvas id="qrCanvas" class="qr" width="220" height="220" aria-label="QR"></canvas>
        <div class="code-label">или скажите код</div>
        <div id="numericCode" class="code">803558</div>
      </div>
    </div>
  </div>

  <script>
    // -------------------- ДАННЫЕ ПРИМЕРА --------------------
    const data = {
      iin: "031209601709",
      dob: "09.12.2003",
      docnum: "050260791",
      issued: "01.03.2022",
      expiry: "01.03.2032",
      displayCode: "803558",               // числовой код в модалке
      qrPayload: "IIN=031209601709;DOC=050260791;CODE=803558" // что кодируем в QR
    };

    // -------------------- РЕНДЕР РЕКВИЗИТОВ --------------------
    function renderInfo({iin,dob,docnum,issued,expiry}){
      const box = document.getElementById("info");
      box.innerHTML = [
        ["ИИН", iin],["Дата рождения", dob],["Номер документа", docnum],
        ["Дата выдачи", issued],["Срок действия", expiry]
      ].map(([label,value])=>`
        <div class="info-item"><div class="info-label">${label}</div>
          <div class="info-value">${value}</div>
        </div>`).join("");
    }
    renderInfo(data);

    // -------------------- ТАБЫ --------------------
    const tabs = document.querySelectorAll(".tab");
    tabs.forEach(t=>t.addEventListener("click", ()=>{
      tabs.forEach(x=>x.classList.remove("active"));
      t.classList.add("active");
      document.getElementById("doc").style.display = t.dataset.tab==="doc"?"block":"none";
      document.getElementById("req").style.display = t.dataset.tab==="req"?"block":"none";
    }));

    // -------------------- МОДАЛКА --------------------
    const modal = document.getElementById("modal");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModalBtn = document.getElementById("closeModalBtn");
    const numericCodeEl = document.getElementById("numericCode");
    openModalBtn.addEventListener("click", ()=>{
      numericCodeEl.textContent = data.displayCode;
      drawQR(data.qrPayload); // генерим QR
      modal.classList.add("show");
      modal.setAttribute("aria-hidden","false");
    });
    closeModalBtn.addEventListener("click", closeModal);
    modal.addEventListener("click", (e)=>{ if(e.target===modal) closeModal(); });
    function closeModal(){
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden","true");
    }

    // -------------------- ПРОСТОЙ QR-РИСОВАЛЬЩИК (заглушка) --------------------
    // Это НЕ настоящий QR-алгоритм, но выглядит как QR. Замените функцию drawQR()
    // на библиотеку типа qrcode.js для настоящего сканируемого кода.
    function drawQR(text){
      const cvs = document.getElementById("qrCanvas");
      const ctx = cvs.getContext("2d");
      const N = 29;        // «разрешение» псевдо-матрицы
      const cell = Math.floor((cvs.width)/N);

      // белый фон
      ctx.fillStyle = "#fff";
      ctx.fillRect(0,0,cvs.width,cvs.height);

      // «рамка» как на скрине
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 10;
      ctx.strokeRect(0,0,cvs.width,cvs.height);

      // простая детерминированная «шахматка» на основе текста
      let seed = 0;
      for (let i=0;i<text.length;i++) seed = (seed*131 + text.charCodeAt(i))>>>0;

      function rnd(){
        seed ^= seed<<13; seed ^= seed>>>17; seed ^= seed<<5;
        return (seed>>>0)/4294967295;
      }

      // три «поисковых» квадрата в углах (визуально как QR)
      function finder(x,y){
        ctx.fillStyle="#000"; ctx.fillRect(x,y,7*cell,7*cell);
        ctx.fillStyle="#fff"; ctx.fillRect(x+cell,y+cell,5*cell,5*cell);
        ctx.fillStyle="#000"; ctx.fillRect(x+2*cell,y+2*cell,3*cell,3*cell);
      }
      finder(1*cell,1*cell);
      finder(cvs.width-8*cell,1*cell);
      finder(1*cell,cvs.height-8*cell);

      // заполняем матрицу псевдо-данными
      ctx.fillStyle="#000";
      for (let r=0;r<N;r++){
        for (let c=0;c<N;c++){
          // пропускаем зоны «поисковых» квадратов
          const inFinder =
            (r>=1 && r<8 && c>=1 && c<8) || (r>=1 && r<8 && c>=N-8 && c<N-1) ||
            (r>=N-8 && r<N-1 && c>=1 && c<8);
          if (inFinder) continue;
          if (rnd() < 0.38) ctx.fillRect(c*cell, r*cell, cell, cell);
        }
      }
    }

    // ---- Пример: открыть модалку по свайпу вниз на мобиле? (необязательно)
    // Можно добавить, если нужно. Пока оставил базовую реализацию.
  </script>
</body>
</html>
