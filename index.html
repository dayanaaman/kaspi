<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Документ</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      background: #f2f2f7;
    }
    .tab-bar {
      display: flex;
      justify-content: space-around;
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #fff;
      border-top: 1px solid #ccc;
    }
    .tab {
      flex: 1;
      padding: 10px;
      text-align: center;
      font-size: 14px;
      color: #888;
      cursor: pointer;
    }
    .tab.active {
      color: #007aff;
      font-weight: 600;
    }
    .content {
      padding: 20px;
      padding-bottom: 70px; /* отступ под таббар */
    }
    .hidden {
      display: none;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-size: 14px;
      color: #555;
    }
    input {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 5px;
      font-size: 14px;
    }
    button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #007aff;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #005ecb;
    }
    img {
      margin-top: 10px;
      border-radius: 12px;
      max-width: 100%;
    }
  </style>
</head>
<body>

  <!-- Контент -->
  <div id="documentTab" class="content">
    <h2>Ваш документ</h2>
    <div class="card">
      <p><b>ФИО:</b> <span id="outFio"></span></p>
      <p><b>ИИН:</b> <span id="outIin"></span></p>
      <p><b>Срок действия:</b> <span id="outExpiry"></span></p>
      <img id="outPhoto" style="display:none;">
    </div>
  </div>

  <div id="detailsTab" class="content hidden">
    <h2>Реквизиты</h2>
    <div class="card">
      <form id="idForm">
        <label>ФИО:</label>
        <input type="text" id="fio" placeholder="Введите ФИО" required>

        <label>ИИН / ИНН:</label>
        <input type="text" id="iin" placeholder="Введите номер">

        <label>Срок действия:</label>
        <input type="date" id="expiry">

        <label>Фото документа:</label>
        <input type="file" id="fileUpload" accept="image/*">

        <button type="submit">Сохранить</button>
      </form>
    </div>
  </div>

  <!-- Нижнее меню -->
  <div class="tab-bar">
    <div class="tab active" onclick="switchTab('document')">Документ</div>
    <div class="tab" onclick="switchTab('details')">Реквизиты</div>
  </div>

  <script>
  // переключение вкладок
  function switchTab(tab) {
    document.getElementById("documentTab").classList.add("hidden");
    document.getElementById("detailsTab").classList.add("hidden");
    document.querySelectorAll(".tab").forEach(el => el.classList.remove("active"));

    if(tab === "document"){
      document.getElementById("documentTab").classList.remove("hidden");
      document.querySelectorAll(".tab")[0].classList.add("active");
    } else {
      document.getElementById("detailsTab").classList.remove("hidden");
      document.querySelectorAll(".tab")[1].classList.add("active");
    }
  }

  // загрузка сохранённых данных при старте
  window.onload = function() {
    if(localStorage.getItem("fio")){
      document.getElementById("outFio").textContent = localStorage.getItem("fio");
      document.getElementById("fio").value = localStorage.getItem("fio");
    }
    if(localStorage.getItem("iin")){
      document.getElementById("outIin").textContent = localStorage.getItem("iin");
      document.getElementById("iin").value = localStorage.getItem("iin");
    }
    if(localStorage.getItem("expiry")){
      document.getElementById("outExpiry").textContent = localStorage.getItem("expiry");
      document.getElementById("expiry").value = localStorage.getItem("expiry");
    }
    if(localStorage.getItem("photo")){
      const img = document.getElementById("outPhoto");
      img.src = localStorage.getItem("photo");
      img.style.display = "block";
    }
  }

  // сохранение данных
  document.getElementById("idForm").addEventListener("submit", function(e){
    e.preventDefault();

    const fio = document.getElementById("fio").value;
    const iin = document.getElementById("iin").value;
    const expiry = document.getElementById("expiry").value;

    localStorage.setItem("fio", fio);
    localStorage.setItem("iin", iin);
    localStorage.setItem("expiry", expiry);

    document.getElementById("outFio").textContent = fio;
    document.getElementById("outIin").textContent = iin;
    document.getElementById("outExpiry").textContent = expiry;

    const file = document.getElementById("fileUpload").files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = function(e){
        const img = document.getElementById("outPhoto");
        img.src = e.target.result;
        img.style.display = "block";
        localStorage.setItem("photo", e.target.result);
      }
      reader.readAsDataURL(file);
    }
    alert("Данные сохранены ✅");
  });
  </script>

</body>
</html>
